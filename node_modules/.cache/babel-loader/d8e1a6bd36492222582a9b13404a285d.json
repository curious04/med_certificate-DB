{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hrith\\\\OneDrive\\\\Desktop\\\\medcertificates-main\\\\src\\\\Contenedores\\\\Workers\\\\Form\\\\index.js\",\n  _s = $RefreshSig$();\nimport { Box, Text } from 'grommet';\nimport { StatusCritical, StatusGood } from 'grommet-icons';\nimport React, { useContext } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { log } from '../../../utils';\nimport { WorkersContext } from '../Context';\nimport { createEntry, updateEntry } from '../sdk/managementAPI';\nimport FormLayout from './FormLayout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Form() {\n  _s();\n  const {\n    current: [current]\n  } = useContext(WorkersContext);\n  const queryClient = useQueryClient();\n  const mutation = useMutation(function ({\n    data,\n    idEmployee\n  }) {\n    if (!idEmployee) {\n      return createEntry(data);\n    } else {\n      return updateEntry(idEmployee, data);\n    }\n  }, {\n    onSuccess: function () {\n      log('success', 'Action performed successfully');\n      queryClient.invalidateQueries('fetchWorkers');\n    },\n    onError: function (err) {\n      console.error(err);\n    },\n    onSettled: function () {}\n  });\n  const isAddMode = !current.id;\n  const onSubmit = values => {\n    console.log('values submitted', values);\n    const payload = {\n      //casting de objetos text que en el backend son int\n      ...values,\n      idEmployee: parseInt(values.idEmployee, 10)\n    };\n    delete payload.createdAt;\n    delete payload.updatedAt;\n    //ancla: estos valores debo modificarlos para la funcion oneToMany\n    delete payload.poster;\n    delete payload.cast;\n    delete payload.id;\n    console.log({\n      values,\n      payload\n    });\n    if (isAddMode) {\n      mutation.mutate({\n        data: payload\n      });\n    } else {\n      mutation.mutate({\n        data: payload,\n        idEmployee: current.id\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    pad: \"medium\",\n    elevation: \"medium\",\n    gap: \"small\",\n    width: \"large\",\n    children: [mutation.isSuccess && /*#__PURE__*/_jsxDEV(Box, {\n      direction: \"row\",\n      gap: \"medium\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        color: \"brand\",\n        children: [\"Worker created successfully... \", /*#__PURE__*/_jsxDEV(StatusGood, {\n          color: \"brand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), mutation.isError && /*#__PURE__*/_jsxDEV(Box, {\n      direction: \"row\",\n      gap: \"medium\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        color: \"accent-1\",\n        children: [\"An error has occurred... \", /*#__PURE__*/_jsxDEV(StatusCritical, {\n          color: \"accent-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FormLayout, {\n      onSubmit: onSubmit,\n      currentValues: current\n    }, current.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(Form, \"udb2rs3FXpzlJVV2a0h4odWSvfc=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["Box","Text","StatusCritical","StatusGood","React","useContext","useMutation","useQueryClient","log","WorkersContext","createEntry","updateEntry","FormLayout","jsxDEV","_jsxDEV","Form","_s","current","queryClient","mutation","data","idEmployee","onSuccess","invalidateQueries","onError","err","console","error","onSettled","isAddMode","id","onSubmit","values","payload","parseInt","createdAt","updatedAt","poster","cast","mutate","pad","elevation","gap","width","children","isSuccess","direction","color","fileName","_jsxFileName","lineNumber","columnNumber","isError","currentValues","_c","$RefreshReg$"],"sources":["C:/Users/hrith/OneDrive/Desktop/medcertificates-main/src/Contenedores/Workers/Form/index.js"],"sourcesContent":["import { Box, Text } from 'grommet';\nimport { StatusCritical, StatusGood } from 'grommet-icons';\nimport React, { useContext } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { log } from '../../../utils';\nimport { WorkersContext } from '../Context';\nimport { createEntry, updateEntry } from '../sdk/managementAPI';\nimport FormLayout from './FormLayout';\n\nfunction Form() {\n  const {\n    current: [current],\n  } = useContext(WorkersContext);\n\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation(\n\n   function ({ data, idEmployee }) {\n    if (!idEmployee) {\n      return createEntry(data);\n    } else {\n      return updateEntry(idEmployee, data);\n    }\n  },\n\n    {\n      onSuccess: function () {\n        log('success', 'Action performed successfully');\n        queryClient.invalidateQueries('fetchWorkers');\n      },\n      onError: function (err) {\n        console.error(err);\n      },\n      onSettled: function () {},\n    }\n  );\n\n  const isAddMode = !current.id;\n\n  const onSubmit = (values) => {\n    console.log('values submitted', values);\n\n    const payload = {\n      //casting de objetos text que en el backend son int\n     ...values,\n     idEmployee: parseInt(values.idEmployee, 10),\n    };\n    delete payload.createdAt;\n    delete payload.updatedAt;\n    //ancla: estos valores debo modificarlos para la funcion oneToMany\n    delete payload.poster;\n    delete payload.cast;\n    delete payload.id;\n\n    console.log({ values, payload });\n\n    if (isAddMode) {\n      mutation.mutate({ data: payload });\n    } else {\n      mutation.mutate({ data: payload, idEmployee: current.id});\n    }\n  };\n\n  return (\n    <Box pad=\"medium\" elevation=\"medium\" gap=\"small\" width=\"large\">\n      {mutation.isSuccess && (\n        <Box direction=\"row\" gap=\"medium\">\n          <Text color=\"brand\">\n            Worker created successfully... <StatusGood color=\"brand\" />\n          </Text>\n        </Box>\n      )}\n\n      {mutation.isError && (\n        <Box direction=\"row\" gap=\"medium\">\n          <Text color=\"accent-1\">\n            An error has occurred... <StatusCritical color=\"accent-1\" />\n          </Text>\n        </Box>\n      )}\n\n      <FormLayout\n        onSubmit={onSubmit}\n        currentValues={current}\n        key={current.id}\n      />\n    </Box>\n  );\n}\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}