{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hrith\\\\OneDrive\\\\Desktop\\\\medcertificates-main\\\\src\\\\Contenedores\\\\Medcerts\\\\Form\\\\index.js\",\n  _s = $RefreshSig$();\nimport { Box, Text } from 'grommet';\nimport { StatusCritical, StatusGood } from 'grommet-icons';\nimport React, { useContext } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { log } from '../../../utils';\nimport { MedcertsContext } from '../Context';\nimport { createEntry, updateEntry } from '../sdk/managementAPI';\nimport FormLayout from './FormLayout';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Form() {\n  _s();\n  const viewMedcert = useHistory();\n  const {\n    current: [current]\n  } = useContext(MedcertsContext);\n  const queryClient = useQueryClient();\n  const mutation = useMutation(function ({\n    data,\n    idMedcert\n  }) {\n    if (!idMedcert) {\n      return createEntry(data);\n    } else {\n      return updateEntry(idMedcert, data);\n    }\n  }, {\n    onSuccess: function () {\n      log('success', 'Action performed successfully');\n      queryClient.invalidateQueries('fetchMedcerts');\n      viewMedcert.push(`/vermedcerts/`);\n    },\n    onError: function (err) {\n      console.error(err);\n    },\n    onSettled: function () {}\n  });\n  const isAddMode = !current.id;\n  const onSubmit = values => {\n    console.log('values submitted', values);\n    const payload = {\n      //casting de objetos text que en el backend son int\n      ...values,\n      idMedCert: parseInt(values.idMedCert, 10),\n      daysOffMedCert: parseInt(values.daysOffMedCert, 10)\n    };\n    delete payload.createdAt;\n    delete payload.updatedAt;\n    //ancla: estos valores debo modificarlos para la funcion oneToMany\n    delete payload.poster;\n    delete payload.cast;\n    delete payload.id;\n    console.log({\n      values,\n      payload\n    });\n    if (isAddMode) {\n      mutation.mutate({\n        data: payload\n      });\n    } else {\n      mutation.mutate({\n        data: payload,\n        idMedCert: current.id\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    pad: \"medium\",\n    elevation: \"medium\",\n    gap: \"small\",\n    width: \"large\",\n    children: [mutation.isSuccess && /*#__PURE__*/_jsxDEV(Box, {\n      direction: \"row\",\n      gap: \"medium\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        color: \"brand\",\n        children: [\"Med Certificate created successfully... \", /*#__PURE__*/_jsxDEV(StatusGood, {\n          color: \"brand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), mutation.isError && /*#__PURE__*/_jsxDEV(Box, {\n      direction: \"row\",\n      gap: \"medium\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        color: \"accent-1\",\n        children: [\"An error has occurred... \", /*#__PURE__*/_jsxDEV(StatusCritical, {\n          color: \"accent-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FormLayout, {\n      onSubmit: onSubmit,\n      currentValues: current\n    }, current.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(Form, \"mFuFfwZSFsScC3VyyJlhry/uglc=\", false, function () {\n  return [useHistory, useQueryClient, useMutation];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["Box","Text","StatusCritical","StatusGood","React","useContext","useMutation","useQueryClient","log","MedcertsContext","createEntry","updateEntry","FormLayout","useHistory","jsxDEV","_jsxDEV","Form","_s","viewMedcert","current","queryClient","mutation","data","idMedcert","onSuccess","invalidateQueries","push","onError","err","console","error","onSettled","isAddMode","id","onSubmit","values","payload","idMedCert","parseInt","daysOffMedCert","createdAt","updatedAt","poster","cast","mutate","pad","elevation","gap","width","children","isSuccess","direction","color","fileName","_jsxFileName","lineNumber","columnNumber","isError","currentValues","_c","$RefreshReg$"],"sources":["C:/Users/hrith/OneDrive/Desktop/medcertificates-main/src/Contenedores/Medcerts/Form/index.js"],"sourcesContent":["import { Box, Text } from 'grommet';\nimport { StatusCritical, StatusGood } from 'grommet-icons';\nimport React, { useContext } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { log } from '../../../utils';\nimport { MedcertsContext } from '../Context';\nimport { createEntry, updateEntry } from '../sdk/managementAPI';\nimport FormLayout from './FormLayout';\nimport { useHistory } from 'react-router-dom';\n\nfunction Form() {\n  const viewMedcert = useHistory();\n  const {\n    current: [current],\n  } = useContext(MedcertsContext);\n\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation(\n\n   function ({ data, idMedcert }) {\n    if (!idMedcert) {\n      return createEntry(data);\n    } else {\n      return updateEntry(idMedcert, data);\n    }\n  },\n\n    {\n      onSuccess: function () {\n        log('success', 'Action performed successfully');\n        queryClient.invalidateQueries('fetchMedcerts');\n        viewMedcert.push(`/vermedcerts/`);\n      },\n      onError: function (err) {\n        console.error(err);\n      },\n      onSettled: function () {},\n    }\n  );\n\n  const isAddMode = !current.id;\n\n  const onSubmit = (values) => {\n    console.log('values submitted', values);\n\n    const payload = {\n      //casting de objetos text que en el backend son int\n     ...values,\n     idMedCert: parseInt(values.idMedCert, 10),\n     daysOffMedCert: parseInt(values.daysOffMedCert, 10),\n    };\n    delete payload.createdAt;\n    delete payload.updatedAt;\n    //ancla: estos valores debo modificarlos para la funcion oneToMany\n    delete payload.poster;\n    delete payload.cast;\n    delete payload.id;\n\n    console.log({ values, payload });\n\n    if (isAddMode) {\n      mutation.mutate({ data: payload });\n    } else {\n      mutation.mutate({ data: payload, idMedCert: current.id});\n    }\n  };\n\n  return (\n    <Box pad=\"medium\" elevation=\"medium\" gap=\"small\" width=\"large\">\n      {mutation.isSuccess && (\n        <Box direction=\"row\" gap=\"medium\">\n          <Text color=\"brand\">\n            Med Certificate created successfully... <StatusGood color=\"brand\" />\n          </Text>\n        </Box>\n      )}\n\n      {mutation.isError && (\n        <Box direction=\"row\" gap=\"medium\">\n          <Text color=\"accent-1\">\n            An error has occurred... <StatusCritical color=\"accent-1\" />\n          </Text>\n        </Box>\n      )}\n\n      <FormLayout\n        onSubmit={onSubmit}\n        currentValues={current}\n        key={current.id}\n      />\n    </Box>\n  );\n}\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}